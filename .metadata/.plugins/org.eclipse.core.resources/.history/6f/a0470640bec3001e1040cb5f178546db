package com.app.service;

import java.util.List;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;
import org.springframework.transaction.annotation.Transactional;

import com.app.dao.AppoimentDao;
import com.app.dao.DoctorDao;
import com.app.dao.PatientDao;
import com.app.entity.Appointmnet;
import com.app.entity.Doctor;

@Service
@Transactional
public class AppointmentServiceImpl implements AppointmentService {
	@Autowired
	private AppoimentDao appDao;
	@Autowired
	private DoctorDao dDao;
	@Autowired
	private PatientDao pDao;
	@Override
	public String addAppointment(Appointmnet app) {
		// TODO Auto-generated method stub
		
		//Doctor d=dDao.findById(app.getDoctorId()).orElseThrow();
		//Patient p=pDao.findById(app.getPatientId()).orElseThrow();
		//validate if app avlable

		Appointmnet a=new Appointmnet(app.getDoctor(), app.getPatient(), app.getTime());
		
		appDao.save(a);
		return "Your Appointment id Is "+a.getId();
	}
	@Override
	public String deleteAppointment(Long id) {
		appDao.deleteById(id);
		return "Appointment No. "+id +" is Canceled";
	}
	@Override
	public List<Appointmnet> getAllAppointmentById(Long id) {
		// TODO Auto-generated method stub
		Doctor d=dDao.findById(id).orElseThrow();
		return appDao.findByDoctor(d);
		 
	}

} 
